import { useLocation } from "react-router";
import useProgress from "../../hooks/useProgress";
import { Center, IconContainer, Indicator, Wrapper } from "./styles";
import TickIcon from "../../assets/images/tick-icon.png";
import CrossIcon from "../../assets/images/cross-icon.png";

export default function ProgressBar({ active, questions, answers, disabled }) {
  const { progress } = useProgress(answers, questions);
  const location = useLocation();

  return (
    <Center>
      <Wrapper disabled={disabled}>
        {Object.keys(progress).map((key, index) => {
          let status = "none";

          // get status of block
          if (index === active && location.pathname.includes(`/${index}`)) {
            status = "active";
          } else if (progress[key] === "wrong") {
            status = "wrong";
          } else if (progress[key] === "right") {
            status = "right";
          }

          // pass status to styled component to get the right styling
          return (
            <Indicator key={`progress-${index}`} status={status}>
              <IconContainer
                className={status}
                dangerouslySetInnerHTML={{
                  __html:
                    status === "right"
                      ? `<img src=${TickIcon} alt="tick" />`
                      : status === "wrong"
                      ? `<img src=${CrossIcon} alt="cross" />`
                      : status === "active"
                      ? SVGMap[index + 1] || ""
                      : "",
                }}
              />
            </Indicator>
          );
        })}
      </Wrapper>
    </Center>
  );
}

const One = `<svg xmlns="http://www.w3.org/2000/svg" width="10" height="18" viewBox="0 0 10 18" fill="none">
<path d="M9.246 17.568H5.622V7.65601C5.622 7.25601 5.63 6.72001 5.646 6.04801C5.662 5.36001 5.686 4.76001 5.718 4.24801C5.638 4.34401 5.462 4.52001 5.19 4.77601C4.934 5.01601 4.694 5.23201 4.47 5.42401L2.502 7.00801L0.75 4.82401L6.27 0.432007H9.246V17.568Z" fill="#C04C1C"/>
</svg>`;

const Two = `<svg xmlns="http://www.w3.org/2000/svg" width="13" height="18" viewBox="0 0 13 18" fill="none">
<path d="M12.4068 17.688H0.430813V15.168L4.72681 10.824C5.59081 9.92801 6.28681 9.18401 6.81481 8.59201C7.34281 7.98401 7.72681 7.44001 7.96681 6.96001C8.20681 6.46401 8.32681 5.93601 8.32681 5.37601C8.32681 4.68801 8.13481 4.17601 7.75081 3.84001C7.38281 3.50401 6.87881 3.33601 6.23881 3.33601C5.58281 3.33601 4.94281 3.48801 4.31881 3.79201C3.69481 4.09601 3.03881 4.52801 2.35081 5.08801L0.382812 2.76001C0.862813 2.34401 1.38281 1.95201 1.94281 1.58401C2.50281 1.20001 3.14281 0.896012 3.86281 0.672012C4.59881 0.432013 5.47881 0.312012 6.50281 0.312012C7.62281 0.312012 8.58281 0.520012 9.38281 0.936012C10.1988 1.33601 10.8228 1.88801 11.2548 2.59201C11.7028 3.28001 11.9268 4.06401 11.9268 4.94401C11.9268 5.88801 11.7348 6.75201 11.3508 7.53601C10.9828 8.32001 10.4388 9.09601 9.71881 9.86401C9.01481 10.632 8.15881 11.48 7.15081 12.408L4.94281 14.472V14.64H12.4068V17.688Z" fill="#C04C1C"/>
</svg>`;

const Three = `<svg xmlns="http://www.w3.org/2000/svg" width="13" height="18" viewBox="0 0 13 18" fill="none">
<path d="M12.0239 4.27202C12.0239 5.45602 11.6639 6.40002 10.9439 7.10402C10.2399 7.80802 9.36788 8.28802 8.32788 8.54402V8.61602C9.68788 8.79202 10.7279 9.21602 11.4479 9.88802C12.1679 10.56 12.5279 11.456 12.5279 12.576C12.5279 13.568 12.2799 14.464 11.7839 15.264C11.3039 16.048 10.5519 16.672 9.52787 17.136C8.51987 17.584 7.21588 17.808 5.61588 17.808C3.75988 17.808 2.11188 17.496 0.671875 16.872V13.8C1.40788 14.168 2.17588 14.448 2.97588 14.64C3.77588 14.832 4.52787 14.928 5.23187 14.928C6.52787 14.928 7.43188 14.704 7.94388 14.256C8.47188 13.808 8.73588 13.176 8.73588 12.36C8.73588 11.896 8.61588 11.496 8.37588 11.16C8.13588 10.824 7.71187 10.576 7.10388 10.416C6.51188 10.24 5.67988 10.152 4.60788 10.152H3.31188V7.36802H4.63188C5.68788 7.36802 6.48788 7.27202 7.03188 7.08002C7.59188 6.87202 7.96788 6.60002 8.15987 6.26402C8.36788 5.91202 8.47188 5.51202 8.47188 5.06402C8.47188 4.45602 8.27988 3.98402 7.89587 3.64802C7.52787 3.29602 6.90387 3.12002 6.02387 3.12002C5.20788 3.12002 4.49588 3.26402 3.88788 3.55202C3.27988 3.84002 2.77588 4.11202 2.37588 4.36802L0.695875 1.87202C1.36788 1.39202 2.15188 0.992017 3.04788 0.672016C3.95988 0.352016 5.03988 0.192017 6.28788 0.192017C8.04788 0.192017 9.43988 0.552016 10.4639 1.27202C11.5039 1.97602 12.0239 2.97602 12.0239 4.27202Z" fill="#C04C1C"/>
</svg>`;

const Four = `<svg xmlns="http://www.w3.org/2000/svg" width="14" height="18" viewBox="0 0 14 18" fill="none">
<path d="M13.0565 14.0161H10.9925V17.5681H7.46453V14.0161H0.144531V11.4961L7.65653 0.432129H10.9925V11.2081H13.0565V14.0161ZM7.46453 11.2081V8.30413C7.46453 7.93613 7.47253 7.48813 7.48853 6.96013C7.50453 6.43213 7.52053 5.94413 7.53653 5.49613C7.56853 5.03213 7.59253 4.72813 7.60853 4.58413H7.51253C7.36853 4.90413 7.20853 5.21613 7.03253 5.52013C6.87253 5.82413 6.68853 6.13613 6.48053 6.45613L3.33653 11.2081H7.46453Z" fill="#C04C1C"/>
</svg>`;

const Five = `<svg xmlns="http://www.w3.org/2000/svg" width="13" height="18" viewBox="0 0 13 18" fill="none">
<path d="M6.69978 6.50401C7.73978 6.50401 8.66778 6.70401 9.48378 7.10401C10.2998 7.50401 10.9398 8.08801 11.4038 8.85601C11.8838 9.62401 12.1238 10.576 12.1238 11.712C12.1238 13.568 11.5478 15.032 10.3958 16.104C9.24378 17.16 7.53978 17.688 5.28378 17.688C4.38778 17.688 3.53978 17.608 2.73978 17.448C1.95578 17.288 1.26778 17.056 0.675781 16.752V13.632C1.26778 13.936 1.97978 14.2 2.81178 14.424C3.64378 14.632 4.42778 14.736 5.16378 14.736C6.23578 14.736 7.05178 14.52 7.61178 14.088C8.18778 13.64 8.47578 12.952 8.47578 12.024C8.47578 10.296 7.33178 9.43201 5.04378 9.43201C4.59578 9.43201 4.13178 9.48001 3.65178 9.57601C3.17178 9.65601 2.77178 9.73601 2.45178 9.81601L1.01178 9.04801L1.65978 0.312012H10.9478V3.38401H4.82778L4.51578 6.74401C4.78778 6.69601 5.07578 6.64801 5.37978 6.60001C5.69978 6.53601 6.13978 6.50401 6.69978 6.50401Z" fill="#C04C1C" />
</svg>`;

const Six = `<svg xmlns="http://www.w3.org/2000/svg" width="14" height="18" viewBox="0 0 14 18" fill="none">
<path d="M0.952148 10.2718C0.952148 9.29582 1.02415 8.32782 1.16815 7.36782C1.31215 6.39182 1.56015 5.47982 1.91215 4.63182C2.28015 3.76782 2.78415 3.00782 3.42415 2.35182C4.08015 1.67982 4.90415 1.15982 5.89615 0.791821C6.90415 0.40782 8.12015 0.21582 9.54415 0.21582C9.88015 0.21582 10.2721 0.23182 10.7201 0.263821C11.1681 0.27982 11.5441 0.319821 11.8481 0.383821V3.28782C11.5441 3.22382 11.2081 3.16782 10.8401 3.11982C10.4881 3.07182 10.1361 3.04782 9.78415 3.04782C8.36015 3.04782 7.25615 3.27182 6.47215 3.71982C5.70415 4.16782 5.16015 4.79982 4.84015 5.61582C4.52015 6.41582 4.33615 7.34382 4.28815 8.39982H4.43215C4.75215 7.83982 5.20815 7.36782 5.80015 6.98382C6.40815 6.59982 7.19215 6.40782 8.15215 6.40782C9.65615 6.40782 10.8481 6.87982 11.7281 7.82382C12.6082 8.76782 13.0482 10.1038 13.0482 11.8318C13.0482 13.6878 12.5201 15.1438 11.4641 16.1998C10.4241 17.2558 9.00815 17.7838 7.21615 17.7838C6.04815 17.7838 4.99215 17.5198 4.04815 16.9918C3.10415 16.4478 2.35215 15.6238 1.79215 14.5198C1.23215 13.3998 0.952148 11.9838 0.952148 10.2718ZM7.14415 14.8798C7.84815 14.8798 8.42415 14.6398 8.87215 14.1598C9.32015 13.6638 9.54415 12.9038 9.54415 11.8798C9.54415 11.0478 9.35215 10.3918 8.96815 9.91182C8.58415 9.43182 8.00015 9.19182 7.21615 9.19182C6.67215 9.19182 6.20015 9.31182 5.80015 9.55182C5.41615 9.79182 5.11215 10.0958 4.88815 10.4638C4.66415 10.8158 4.55215 11.1838 4.55215 11.5678C4.55215 12.0958 4.64815 12.6158 4.84015 13.1278C5.03215 13.6398 5.32015 14.0638 5.70415 14.3998C6.10415 14.7198 6.58415 14.8798 7.14415 14.8798Z" fill="#C04C1C"/>
</svg>`;

const SVGMap = {
  1: One,
  2: Two,
  3: Three,
  4: Four,
  5: Five,
  6: Six,
};
